<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EntreNos ‚Äî Apoyo en Trastornos Alimenticios</title>
  <!-- Fuente -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#FAFBFC;
      --accent:#0066CC;
      --muted:#6b7280;
      --card:#ffffff;
      --success:#10B981;
      --danger:#EF4444;
      --glass: rgba(255,255,255,0.6);
      --maxw:1100px;
      --radius:12px;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:linear-gradient(180deg,#b7ddde 0%, #f6f9ff 100%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }

    header{
      background:transparent;
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(15,23,42,0.04);
    }
    .nav{
      max-width:var(--maxw);
      margin:0 auto;
      display:flex;
      align-items:center;
      gap:16px;
      padding:18px;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo{
      width:48px;
      height:48px;
      border-radius:10px;
      background:linear-gradient(135deg, #0066CC 0%, #4F8CFF 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      color:white;
      font-weight:700;
      font-size:18px;
      box-shadow: 0 6px 20px rgba(16,24,40,0.06);
    }
    nav a{
      margin-left:14px;
      color:var(--muted);
      text-decoration:none;
      font-weight:600;
    }
    .cta{
      background:var(--accent);
      color:white;
      padding:10px 14px;
      border-radius:10px;
      text-decoration:none;
      font-weight:600;
      box-shadow: 0 8px 24px rgba(79,140,255,0.12);
    }

    main{
      max-width:var(--maxw);
      margin:28px auto;
      padding:20px;
    }

    .hero{
      display:flex;
      gap:28px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      padding:28px;
      background: linear-gradient(180deg, rgba(219, 217, 217, 0.7), rgba(255,255,255,0.6));
      border-radius:16px;
      box-shadow: 0 8px 30px rgba(15,23,42,0.04);
    }

    .hero:hover{
        background-color: #6b7280;
    }
    .hero-left{flex:1 1 420px; min-width:260px}
    .eyebrow{
      display:inline-flex;
      align-items:center;
      gap:8px;
      color:var(--accent);
      font-weight:700;
      margin-bottom:10px;
    }
    h1{
      margin:0 0 12px 0;
      font-size:28px;
      line-height:1.1;
    }
    p.lead{
      margin:0 0 18px 0;
      color:var(--muted);
    }
    .buttons{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border:1px solid rgba(15,23,42,0.06);
      background:white;
      text-decoration:none;
      color:#0f172a;
      font-weight:600;
    }
    .btn:hover{ 
        background-color: #bdbdbd;
    }

    .btn.alt:hover{ 
        background-color:  #bdbdbd;
    }

    .btn.alt{
      background:transparent;
      color:var(--accent);
      border:2px solid rgba(0,102,204,0.12);
    }

    .hero-right{
      flex:0 1 360px;
      min-width:260px;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow: 0 6px 18px rgba(15,23,42,0.05);
    }
    .emergency{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .phone{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .phone a{
      font-weight:700;
      color:var(--danger);
      text-decoration:none;
    }
    .small{
      color:var(--muted);
      font-size:13px;
    }

    /* sections */
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:18px;
      margin-top:24px;
    }
    @media (max-width:900px){ .grid{grid-template-columns:repeat(1,1fr);} }

    .info{
      padding:18px;
      border-radius:12px;
      background:linear-gradient(180deg,#ffffff,#fbfdff);
      box-shadow: 0 6px 20px rgba(16,24,40,0.03);
    }
    .list{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:8px;
    }
    .list .item{
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .bullet{
      min-width:36px;
      height:36px;
      border-radius:8px;
      background:var(--glass);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:var(--accent);
    }

    /* resources and footer */
    footer{
      margin-top:32px;
      padding:28px 18px;
      color:var(--muted);
      border-top:1px solid rgba(15,23,42,0.04);
    }
    .footer-grid{
      max-width:var(--maxw);
      margin:0 auto;
      display:grid;
      grid-template-columns: 1fr 220px;
      gap:18px;
      align-items:start;
    }
    @media (max-width:900px){ .footer-grid{grid-template-columns:1fr;} }

    .resources{
      display:flex;
      gap:12px;
      flex-direction:column;
    }
    .resource-list a{
      color:var(--accent);
      font-weight:600;
      text-decoration:none;
      display:block;
      margin:6px 0;
    }

    .footer-bottom{
      margin-top:18px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    /* Chat modal */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background:rgba(2,6,23,0.45);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:80;
    }
    .modal{
      width:100%;
      max-width:720px;
      background:white;
      border-radius:14px;
      padding:16px;
      box-shadow: 0 24px 60px rgba(2,6,23,0.4);
    }
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .close-btn{
      background:transparent;
      border:none;
      font-size:18px;
      cursor:pointer;
      color:var(--muted);
    }
    .chat-window{
      height:360px;
      border-radius:10px;
      border:1px solid rgba(15,23,42,0.06);
      padding:12px;
      overflow:auto;
      background:linear-gradient(180deg,#fbfdff,#ffffff);
    }
    .chat-controls{
      display:flex;
      gap:8px;
      margin-top:10px;
    }
    .input{
      flex:1;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(15,23,42,0.06);
    }

    /* small utility */
    .muted{color:var(--muted)}
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(6,95,197,0.06);
      color:var(--accent);
      font-weight:700;
      font-size:13px;
    }

  </style>
</head>
<body>
  <header>
    <div class="nav" role="navigation" aria-label="Principal">
      <div class="brand">
        <div class="logo" aria-hidden="true">EN</div>
        <div>
          <div style="font-weight:800;">EntreNos</div>
          <div class="small">Apoyo en Trastornos Alimenticios</div>
        </div>
      </div>

      <div style="display:flex;align-items:center;">
        <nav aria-label="Secciones">
          <a href="#info">Informaci√≥n</a>
          <a href="#profesionales">Profesionales</a>
          <a href="#recursos">Recursos</a>
        </nav>
        <a href="#chat" class="cta" id="openChatBtn" style="margin-left:18px">Chat IA</a>
      </div>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-left">
        <div class="eyebrow">¬øQu√© son los Trastornos Alimenticios?</div>
        <h1 id="hero-title">Informaci√≥n esencial sobre estas condiciones de salud mental</h1>
        <p class="lead">Los trastornos de la conducta alimentaria (TCA) son afecciones graves de salud mental que afectan tanto la salud f√≠sica como emocional. Se caracterizan por alteraciones persistentes en los patrones de alimentaci√≥n que resultan en un deterioro significativo de la salud f√≠sica o del funcionamiento psicosocial.</p>

        <div class="buttons">
          <a class="btn" href="#info">Explorar Informaci√≥n</a>
          <a class="btn alt" href="#recursos">Recursos</a>
        </div>

        <div style="margin-top:18px" class="muted">
          <strong>EntreNos</strong><br>
          Esta p√°gina ofrece informaci√≥n educativa sobre trastornos alimenticios. No sustituye el diagn√≥stico o tratamiento profesional.
        </div>
      </div>

      <aside class="hero-right">
        <div class="card" role="complementary" aria-label="Ayuda inmediata">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div style="font-weight:700">¬øNecesitas ayuda inmediata?</div>
              <div class="small">Si t√∫ o alguien que conoces est√° en crisis, contacta la L√≠nea Nacional (disponible 24/7).</div>
            </div>
          </div>

          <div style="margin-top:14px" class="emergency">
            <div class="phone">
              <div class="small">Tel√©fono de emergencia</div>
              <a href="tel:900202010" aria-label="Llamar al 900202010">900 20 20 10</a>
              <a href="tel:112" aria-label="Llamar al 112" class="small">112</a>
            </div>
            <div style="margin-left:auto;text-align:right">
              <div class="small">Apoyo profesional</div>
              <div class="chip">Trabajar con especialistas</div>
            </div>
          </div>

          <div style="margin-top:12px" class="small">Emergencias: Si est√°s en crisis, contacta inmediatamente. Disponible 24/7.</div>
        </div>
      </aside>
    </section>

    <!-- Main info grid -->
    <section id="info" style="margin-top:18px;">
      <div class="grid">
        <div class="info card" aria-labelledby="que">
          <h3 id="que">¬øQu√© son los Trastornos Alimenticios?</h3>
          <p class="muted">Los trastornos de la conducta alimentaria (TCA) son afecciones serias de salud mental que pueden afectar cualquier edad o g√©nero. Pueden incluir anorexia nerviosa, bulimia nerviosa, trastorno por atrac√≥n, y otras condiciones.</p>

          <div class="list" style="margin-top:12px;">
            <div class="item">
              <div class="bullet">‚úì</div>
              <div>
                <div style="font-weight:700">Afectan a millones</div>
                <div class="small">Millones de personas de todas las edades y g√©neros.</div>
              </div>
            </div>

            <div class="item">
              <div class="bullet">‚öï</div>
              <div>
                <div style="font-weight:700">Condici√≥n m√©dica seria</div>
                <div class="small">No son elecciones de estilo de vida.</div>
              </div>
            </div>

            <div class="item">
              <div class="bullet">‚≠ê</div>
              <div>
                <div style="font-weight:700">Recuperaci√≥n posible</div>
                <div class="small">La recuperaci√≥n completa es posible con tratamiento adecuado.</div>
              </div>
            </div>

            <div class="item">
              <div class="bullet">‚è±</div>
              <div>
                <div style="font-weight:700">Intervenci√≥n temprana</div>
                <div class="small">Mejora significativamente los resultados.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="info card" aria-labelledby="apoyo">
          <h3 id="apoyo">Apoyo Profesional</h3>
          <p class="muted">Trabajar con profesionales especializados es fundamental para la recuperaci√≥n.</p>
          <ul style="margin-top:10px;color:var(--muted)">
            <li>M√©dicos y psiquiatras</li>
            <li>Psic√≥logos especializados en TCA</li>
            <li>Nutricionistas cl√≠nicos</li>
            <li>Grupos de apoyo</li>
          </ul>
        </div>

        <div class="info card" aria-labelledby="comunidad">
          <h3 id="comunidad">Comunidad</h3>
          <p class="muted">El apoyo de grupos y comunidades puede ser un complemento valioso al tratamiento.</p>
          <p class="small" style="margin-top:8px">Buscar espacios seguros, compartir experiencias y recibir acompa√±amiento reduce el aislamiento.</p>
        </div>
      </div>

      <!-- Second row -->
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px;">
        <div class="card info" aria-labelledby="educ">
          <h3 id="educ">Educaci√≥n</h3>
          <p class="muted">Entender estos trastornos ayuda a reducir el estigma y promover la empat√≠a.</p>
          <p class="small" style="margin-top:8px">Materiales educativos, talleres y formaci√≥n para profesionales y comunidades.</p>
        </div>

        <div class="card info" aria-labelledby="emerg">
          <h3 id="emerg">Emergencias</h3>
          <p class="muted">Si est√°s en crisis, contacta inmediatamente:</p>
          <div style="margin-top:10px;display:flex;gap:10px;flex-direction:column;">
            <a class="btn" href="tel:01 2927879 ">üìû 106 </a>
            <a class="btn alt" href="tel:900202010">üìû 919293465 </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Recursos -->
    <section id="recursos" style="margin-top:22px;">
      <div class="card info" style="padding:18px;">
        <h3>Recursos</h3>
        <p class="muted">Algunas fuentes y organizaciones que pueden ayudar:</p>
        <div class="resource-list" style="margin-top:12px;">
          <a href="#" onclick="return false">Ministerio de Salud</a>
          <a href="#" onclick="return false">Salud Mental Per√∫</a>
          <a href="#" onclick="return false">Bomberos </a>
          <a href="#" onclick="return false">Psicologos</a>
        </div>

        <p class="small" style="margin-top:12px">Esta p√°gina ofrece asesor√≠a profesional.</p>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="footer-grid">
        <div>
          <div style="font-weight:800;font-size:18px">EntreNos</div>
          <div class="small" style="margin-top:6px">Juntos en el camino ‚Äî Hecho para ayudarte</div>

          <div style="margin-top:12px" class="muted">
            ¬© 2025 EntreNos - Apoyo en Trastornos Alimenticios. Informaci√≥n con fines educativos.
          </div>
        </div>

        <div>
          <div style="font-weight:700">Contacto</div>
          <div class="small" style="margin-top:6px">
            <div>Tel: <a href="tel:112">112</a></div>
            <div>Tel: <a href="tel:900202010">900 20 20 10</a></div>
            <div style="margin-top:8px">Hacer remix con Figma Make</div>
            <div class="small" style="margin-top:6px">
              <a href="https://www.figma.com/community/make" target="_blank" rel="noopener">Figma Make</a>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom" style="max-width:var(--maxw);margin:12px auto 0;">
        <div class="small">Hecho con ‚ù§Ô∏è para ayudarte</div>
        <div class="small">Dise√±o e informaci√≥n: EntreNos</div>
      </div>
    </footer>
  </main>

  <!-- Chat modal (simulado) -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="chatTitle">
      <div class="modal-header">
        <div>
          <div id="chatTitle" style="font-weight:800">Chat de Ayuda IA</div>
          <div class="small">Espacio seguro y confidencial</div>
        </div>
        <button class="close-btn" id="closeModal" aria-label="Cerrar chat">‚úï</button>
      </div>

      <div class="chat-window" id="chatWindow" aria-live="polite">
        <div class="small muted">Chat iniciado. Este es un simulador de ayuda. En caso de crisis, llama a los n√∫meros de emergencia.</div>
      </div>

      <div class="chat-controls" style="margin-top:12px;">
        <input class="input" id="chatInput" placeholder="Escribe tu mensaje..." aria-label="Escribe tu mensaje"/>
        <button class="btn" id="sendBtn">Enviar</button>
      </div>
    </div>
  </div>

<script>
(function(){
  // =============================
  // M√ìDULO 1: Modal del chat
  // =============================
  const openBtn = document.getElementById('openChatBtn');
  const backdrop = document.getElementById('modalBackdrop');
  const closeBtn = document.getElementById('closeModal');
  const chatWindow = document.getElementById('chatWindow');
  const chatInput = document.getElementById('chatInput');
  const sendBtn = document.getElementById('sendBtn');

  function openModal(e){
    e && e.preventDefault();
    backdrop.style.display = 'flex';
    backdrop.setAttribute('aria-hidden','false');
    chatInput.focus();
    if(!chatIniciado) iniciarChat();
  }
  function closeModal(){
    backdrop.style.display = 'none';
    backdrop.setAttribute('aria-hidden','true');
    openBtn.focus();
  }

  openBtn.addEventListener('click', openModal);
  closeBtn.addEventListener('click', closeModal);
  backdrop.addEventListener('click', function(e){
    if(e.target === backdrop) closeModal();
  });
  document.addEventListener('keydown', function(e){
    if(e.key === 'Escape' && backdrop.style.display === 'flex'){ closeModal(); }
  });

  // =============================
  // M√ìDULO 2: Chat interactivo guiado + MEMORIA + DETECCI√ìN DE RIESGO
  // =============================

  const preguntas = [
    { text: "Hola, quiero conocerte mejor para ayudarte. Del 1 al 10, ¬øc√≥mo te sientes hoy (1 muy mal ‚Äì 10 excelente)?", etapa: "estado" },
    { text: "¬øCu√°nto calificar√≠as tu ansiedad (1‚Äì10)?", etapa: "ansiedad" },
    { text: "Con cu√°l de estos problemas te identificas: Bulimia, Anorexia, Atracones o Evitaci√≥n de ingesta?", etapa: "tca" },
    { text: "¬øQu√© comes durante el d√≠a?", etapa: "alimentacion" },
    { text: "¬øHay alimentos que te preocupan? ¬øPor qu√©?", etapa: "alimentacion" },
    { text: "¬øConsideras que controlas excesivamente lo que comes?", etapa: "alimentacion" },
    { text: "¬øHas vomitado, usado laxantes, diur√©ticos u otros productos para ‚Äòcontrolar‚Äô tu peso?", etapa: "alimentacion" },
    { text: "¬øC√≥mo valorar√≠as tu imagen f√≠sica en este momento, positiva o negativa? ¬øPor qu√©?", etapa: "autoestima" },
    { text: "¬øCu√°nto tiempo del d√≠a dedicas a pensar en tu peso y en la comida?", etapa: "autoestima" },
    { text: "¬øTe pesas con m√°s frecuencia?", etapa: "autoestima" },
    { text: "¬øTe miras al espejo con m√°s frecuencia? ¬øCu√°nto?", etapa: "autoestima" },
    { text: "¬øEvitas pesarte o mirarte al espejo?", etapa: "autoestima" },
    { text: "¬øHas notado debilidad en tus m√∫sculos?", etapa: "sintomas" },
    { text: "¬øC√≥mo duermes? ¬øCu√°ntas horas al d√≠a?", etapa: "sintomas" },
    { text: "¬øTienes mareos o sensaci√≥n de desvanecimiento? ¬øCon qu√© frecuencia?", etapa: "sintomas" },
    { text: "Te recomiendo algunas t√©cnicas para prevenir una crisis ansiosa: respiraci√≥n profunda, escritura emocional, pausas de descanso, hablar con alguien de confianza.", etapa: "recomendacion" },
    { text: "Adem√°s, intenta mantener horarios regulares de comida, no saltar desayunos, e incluir alimentos variados.", etapa: "recomendacion" },
    { text: "Recuerda: tu valor no depende de tu peso ni de tu apariencia. Puedes contar conmigo siempre que lo necesites üíô", etapa: "final" }
  ];

  const definicionesTCA = {
    "bulimia": "Bulimia nerviosa: episodios de ingesta excesiva seguidos de conductas compensatorias como v√≥mito, laxantes o ejercicio excesivo.",
    "anorexia": "Anorexia nerviosa: restricci√≥n severa de la ingesta con intenso miedo a subir de peso.",
    "atracones": "Trastorno por atrac√≥n: comer grandes cantidades en poco tiempo con sensaci√≥n de p√©rdida de control.",
    "evitaci√≥n": "ARFID: evitaci√≥n persistente de alimentos no motivada por imagen corporal sino por rechazo sensorial o miedo a consecuencias."
  };

  let indice = 0;
  let chatIniciado = false;

  // ====== Memoria del chat ======
  let memoriaChat = {
    estado_animo: null,
    ansiedad: null,
    tipo_tca: null,
    alimentacion: [],
    autoestima: [],
    sintomas: []
  };

  // ====== Palabras sensibles ======
  const palabrasRiesgo = [
    "muerte", "morir", "quiero morir", "suicid", "suicidarme", "matarme",
    "lastimarme", "autolesion", "autolesi√≥n", "no quiero vivir",
    "quitarme la vida", "desaparecer", "hacerme da√±o", "cansado de vivir"
  ];

  function contieneRiesgo(texto){
    const t = texto.toLowerCase();
    return palabrasRiesgo.some(p => t.includes(p));
  }

  function mensajeApoyo(){
    addMessage(
      "üíô Lamento que est√©s pasando por un momento tan dif√≠cil. No est√°s solo/a.\n\n" +
      "Si est√°s pensando en hacerte da√±o, es muy importante buscar apoyo inmediato.\n" +
      "En Per√∫ puedes llamar a la L√≠nea 113 opci√≥n 5 (salud mental). Tambi√©n hablar con alguien de confianza puede ayudarte.\n\n" +
      "Estoy aqu√≠ para acompa√±arte, gracias por confiar en m√≠.",
      "bot"
    );
  }

  // ====== Funciones del chat ======
  function addMessage(text, sender){
    const div = document.createElement('div');
    div.style.margin = '10px 0';
    div.style.padding = '8px 10px';
    div.style.borderRadius = '8px';
    div.style.whiteSpace = 'pre-wrap';
    div.style.lineHeight = '1.4';

    if(sender === 'user'){
      div.style.alignSelf = 'flex-end';
      div.style.background = 'linear-gradient(90deg,#e6f0ff,#fff)';
      div.style.border = '1px solid rgba(6,95,197,0.08)';
      div.textContent = "T√∫: " + text;
    } else {
      div.style.background = '#f7fafc';
      div.style.border = '1px solid rgba(15,23,42,0.04)';
      div.textContent = "Bot: " + text;
    }
    chatWindow.appendChild(div);
    chatWindow.scrollTop = chatWindow.scrollHeight;
  }

  function nextPregunta(){
    if(indice < preguntas.length){
      const p = preguntas[indice];
      setTimeout(()=>addMessage(p.text, 'bot'), 600);
    }
  }

  function iniciarChat(){
    chatIniciado = true;
    indice = 0;
    chatWindow.innerHTML =
      '<div class="small muted">Chat iniciado. Este es un simulador de ayuda emocional. En caso de crisis, llama a emergencias.</div>';
    nextPregunta();
  }

  // ====== Interactividad seg√∫n memoria ======
  function interaccionMemoria(etapa, respuesta){
    const r = respuesta.toLowerCase();

    if(etapa === "estado"){
      let n = parseInt(respuesta);
      if(n <= 3){
        addMessage("Siento que est√©s pasando por un d√≠a dif√≠cil. Gracias por compartirlo, estoy contigo üíô", "bot");
      } else if(n <= 6){
        addMessage("Gracias por contarlo. Vamos paso a paso, estoy aqu√≠ para ti.", "bot");
      } else {
        addMessage("Me alegra que te sientas relativamente bien. Sigamos conversando üòä", "bot");
      }
    }

    if(etapa === "ansiedad"){
      let n = parseInt(respuesta);
      if(n >= 7){
        addMessage("Debe ser agotador sentir tanta ansiedad. Vamos a tratar de bajarla juntos üôè", "bot");
      }
    }

    if(etapa === "alimentacion"){
      if(r.includes("nada") || r.includes("poco")){
        addMessage("Comer muy poco puede afectar mucho tu energ√≠a. Gracias por contarlo, avancemos con calma üíô", "bot");
      }
    }
  }

  // ====== Env√≠o de mensajes ======
  sendBtn.addEventListener('click', ()=>{
    const respuesta = chatInput.value.trim();
    if(respuesta === "") return;

    addMessage(respuesta, 'user');

    // 1. DETECCI√ìN DE RIESGO
    if(contieneRiesgo(respuesta)){
      mensajeApoyo();
    }

    // 2. GUARDAR MEMORIA
    const etapaActual = preguntas[indice]?.etapa;

    if(etapaActual === "estado") memoriaChat.estado_animo = respuesta;
    if(etapaActual === "ansiedad") memoriaChat.ansiedad = respuesta;
    if(etapaActual === "tca") memoriaChat.tipo_tca = respuesta;
    if(etapaActual === "alimentacion") memoriaChat.alimentacion.push(respuesta);
    if(etapaActual === "autoestima") memoriaChat.autoestima.push(respuesta);
    if(etapaActual === "sintomas") memoriaChat.sintomas.push(respuesta);

    // 3. Definiciones TCA
    if(etapaActual === "tca"){
      const clave = respuesta.toLowerCase();
      for(let k in definicionesTCA){
        if(clave.includes(k)){
          addMessage(definicionesTCA[k], "bot");
        }
      }
    }

    // 4. Avanzar
    indice++;
    chatInput.value = "";
    nextPregunta();

    // 5. M√°s interactividad
    interaccionMemoria(etapaActual, respuesta);
  });

  chatInput.addEventListener('keydown', function(e){
    if(e.key === 'Enter'){ e.preventDefault(); sendBtn.click(); }
  });

  // =============================
  // M√ìDULO 3: Scroll suave
  // =============================
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', function(e){
      const targetId = this.getAttribute('href').slice(1);
      const el = document.getElementById(targetId);
      if(el){
        e.preventDefault();
        el.scrollIntoView({behavior:'smooth',block:'start'});
      }
    });
  });

})();
</script>
  </script>
</body>
</html>

